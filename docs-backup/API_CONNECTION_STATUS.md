# ğŸ”— API é€£æ¥ç‹€æ…‹å ±å‘Š

## ğŸ“Š **ç•¶å‰ç‹€æ…‹**

### âœ… **æ­£å¸¸å·¥ä½œçš„æœå‹™**

- **Render API**: `https://cardstrategy-api.onrender.com/api`
  - ç‹€æ…‹: âœ… æ­£å¸¸é‹è¡Œ
  - éŸ¿æ‡‰æ™‚é–“: æ­£å¸¸
  - ç’°å¢ƒ: production
  - ç‰ˆæœ¬: 1.0.0

### âŒ **éœ€è¦ä¿®å¾©çš„æœå‹™**

- **DigitalOcean API**: `https://api.cardstrategy.com/api`

  - ç‹€æ…‹: âŒ åŸŸåæœªè§£æ
  - å•é¡Œ: DNS é…ç½®æœªå®Œæˆ
  - è§£æ±ºæ–¹æ¡ˆ: éœ€è¦é…ç½® Cloudflare DNS

- **æœ¬åœ°é–‹ç™¼ç’°å¢ƒ**: `http://localhost:3000/api`
  - ç‹€æ…‹: âŒ æœå‹™æœªé‹è¡Œ
  - å•é¡Œ: æœ¬åœ°å¾Œç«¯æœå‹™æœªå•Ÿå‹•
  - è§£æ±ºæ–¹æ¡ˆ: å•Ÿå‹•æœ¬åœ°é–‹ç™¼æœå‹™å™¨

## ğŸ”§ **å·²å®Œæˆçš„ä¿®å¾©**

### 1. **çµ±ä¸€ API é…ç½®**

- âœ… ä¿®å¾©äº† `src/config/api.ts` ä¸­çš„ API åŸºç¤ URL é…ç½®
- âœ… çµ±ä¸€ä½¿ç”¨ Render API ä½œç‚ºä¸»è¦ç«¯é»
- âœ… æ·»åŠ äº†è«‹æ±‚/éŸ¿æ‡‰æ””æˆªå™¨
- âœ… ä¿®å¾©äº†èªè­‰ token è™•ç†

### 2. **ç’°å¢ƒé…ç½®å„ªåŒ–**

- âœ… ä¿®å¾©äº† `src/config/environment.ts` ä¸­çš„é–‹ç™¼ç’°å¢ƒé…ç½®
- âœ… ä¿®å¾©äº† `src/utils/constants.ts` ä¸­çš„ API åŸºç¤ URL
- âœ… çµ±ä¸€äº†æ‰€æœ‰ç’°å¢ƒçš„ API ç«¯é»é…ç½®

### 3. **API ç«¯é»å°é½Š**

- âœ… ä¿®å¾©äº†å¸‚å ´æ•¸æ“šç«¯é» (`/market-data`)
- âœ… ä¿®å¾©äº†æ¨¡æ“¬é‘‘å®šç«¯é» (`/grading`)
- âœ… ç¢ºä¿å‰å¾Œç«¯ç«¯é»è·¯å¾‘ä¸€è‡´

## ğŸš€ **ç•¶å‰å¯ç”¨çš„åŠŸèƒ½**

### **å‰ç«¯æ‡‰ç”¨**

- âœ… å¯ä»¥é€£æ¥åˆ° Render API
- âœ… èªè­‰ç³»çµ±æ­£å¸¸å·¥ä½œ
- âœ… æ‰€æœ‰ API ç«¯é»é…ç½®æ­£ç¢º
- âœ… éŒ¯èª¤è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶æ­£å¸¸

### **å¾Œç«¯ API**

- âœ… å¥åº·æª¢æŸ¥ç«¯é»æ­£å¸¸
- âœ… æ•¸æ“šåº«é€£æ¥æ­£å¸¸
- âœ… æ‰€æœ‰è·¯ç”±é…ç½®æ­£ç¢º
- âœ… å®‰å…¨ä¸­é–“ä»¶æ­£å¸¸å·¥ä½œ

## ğŸ“‹ **ä¸‹ä¸€æ­¥éœ€è¦å®Œæˆçš„å·¥ä½œ**

### **1. é…ç½® DigitalOcean åŸŸå**

```bash
# åœ¨ Cloudflare ä¸­é…ç½® DNS è¨˜éŒ„
# å°‡ api.cardstrategy.com æŒ‡å‘ DigitalOcean Droplet IP
# ç•¶å‰ Droplet IP: 159.223.84.189
```

### **2. å•Ÿå‹•æœ¬åœ°é–‹ç™¼ç’°å¢ƒ**

```bash
# å•Ÿå‹•æœ¬åœ°å¾Œç«¯æœå‹™
cd backend
npm install
npm run dev

# æˆ–è€…ä½¿ç”¨ Docker
docker-compose up backend
```

### **3. æ¸¬è©¦å®Œæ•´åŠŸèƒ½**

```bash
# æ¸¬è©¦ API é€£æ¥
npm run check:services

# æ¸¬è©¦å‰ç«¯åŠŸèƒ½
npm start
```

## ğŸ¯ **å»ºè­°çš„é–‹ç™¼æµç¨‹**

### **é–‹ç™¼éšæ®µ**

1. ä½¿ç”¨ Render API é€²è¡Œé–‹ç™¼å’Œæ¸¬è©¦
2. æ‰€æœ‰åŠŸèƒ½éƒ½é€šé Render ç’°å¢ƒé©—è­‰
3. æœ¬åœ°ç’°å¢ƒåƒ…ç”¨æ–¼èª¿è©¦ç‰¹å®šå•é¡Œ

### **éƒ¨ç½²éšæ®µ**

1. æ¨é€åˆ° `develop` åˆ†æ”¯ â†’ è‡ªå‹•éƒ¨ç½²åˆ° Render
2. æ¸¬è©¦å®Œæˆå¾Œåˆä½µåˆ° `main` åˆ†æ”¯ â†’ è‡ªå‹•éƒ¨ç½²åˆ° DigitalOcean
3. é…ç½® Cloudflare DNS æŒ‡å‘ DigitalOcean

## ğŸ” **ç›£æ§å’Œç¶­è­·**

### **å¥åº·æª¢æŸ¥**

```bash
# æª¢æŸ¥æ‰€æœ‰æœå‹™ç‹€æ…‹
npm run check:services

# æ¸¬è©¦ API é€£æ¥
node scripts/test-api-connection.js
```

### **æ—¥èªŒç›£æ§**

- Render æ§åˆ¶å°: https://dashboard.render.com/
- DigitalOcean æ§åˆ¶å°: https://cloud.digitalocean.com/
- GitHub Actions: https://github.com/star64ccs/CardStrategy/actions

## âœ… **ç¸½çµ**

**å‰å¾Œç«¯é€£æ¥å•é¡Œå·²åŸºæœ¬è§£æ±ºï¼**

- âœ… **ä¸»è¦ API ç«¯é»æ­£å¸¸å·¥ä½œ**
- âœ… **å‰ç«¯é…ç½®å·²çµ±ä¸€**
- âœ… **èªè­‰ç³»çµ±æ­£å¸¸**
- âœ… **éŒ¯èª¤è™•ç†å®Œå–„**

**å‰©é¤˜å•é¡Œ**:

- âš ï¸ DigitalOcean åŸŸåé…ç½® (ä¸å½±éŸ¿ç•¶å‰é–‹ç™¼)
- âš ï¸ æœ¬åœ°é–‹ç™¼ç’°å¢ƒ (å¯é¸ï¼Œä½¿ç”¨ Render å³å¯)

**å»ºè­°**: ç¹¼çºŒä½¿ç”¨ Render API é€²è¡Œé–‹ç™¼ï¼ŒDigitalOcean é…ç½®å¯ä»¥åœ¨ç”Ÿç”¢éƒ¨ç½²æ™‚å®Œæˆã€‚
