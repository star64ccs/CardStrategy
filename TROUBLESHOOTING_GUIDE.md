# 🔧 CardStrategy 故障排除指南

## 目錄

1. [常見問題](#常見問題)
2. [登錄問題](#登錄問題)
3. [應用性能問題](#應用性能問題)
4. [數據同步問題](#數據同步問題)
5. [網絡連接問題](#網絡連接問題)
6. [功能異常問題](#功能異常問題)
7. [系統錯誤](#系統錯誤)
8. [開發環境問題](#開發環境問題)
9. [部署問題](#部署問題)
10. [聯繫支持](#聯繫支持)

## 常見問題

### 應用無法啟動

#### 症狀
- 應用點擊後無響應
- 啟動畫面卡住
- 閃退

#### 解決方案

**1. 清除應用緩存**
```bash
# Android
設置 > 應用管理 > CardStrategy > 存儲 > 清除緩存

# iOS
設置 > 通用 > iPhone 存儲空間 > CardStrategy > 卸載應用 > 重新安裝
```

**2. 檢查存儲空間**
- 確保設備有足夠的可用存儲空間（至少 500MB）
- 清理不必要的文件和應用

**3. 重啟設備**
- 完全關閉應用
- 重啟設備
- 重新啟動應用

**4. 重新安裝應用**
- 卸載應用
- 重新下載安裝
- 重新登錄

### 登錄失敗

#### 症狀
- 輸入正確密碼仍無法登錄
- 顯示「帳戶不存在」
- 顯示「密碼錯誤」

#### 解決方案

**1. 檢查網絡連接**
```bash
# 測試網絡連接
ping cardstrategy.com

# 檢查 DNS 設置
nslookup cardstrategy.com
```

**2. 重置密碼**
1. 點擊「忘記密碼」
2. 輸入註冊郵箱
3. 檢查郵件並點擊重置鏈接
4. 設置新密碼

**3. 檢查帳戶狀態**
- 確認帳戶未被凍結
- 檢查郵箱驗證狀態
- 聯繫客服確認帳戶狀態

**4. 清除瀏覽器數據（Web 版）**
```bash
# Chrome
Ctrl+Shift+Delete > 清除瀏覽數據

# Firefox
Ctrl+Shift+Delete > 清除最近歷史記錄
```

## 登錄問題

### 雙重認證問題

#### 症狀
- 無法接收驗證碼
- 驗證碼輸入錯誤
- 備用碼無效

#### 解決方案

**1. 檢查時間同步**
```bash
# 確保設備時間準確
設置 > 系統 > 日期和時間 > 自動設置時間
```

**2. 重新設置雙重認證**
1. 登錄後進入安全設置
2. 禁用雙重認證
3. 重新啟用並設置新的認證器

**3. 使用備用碼**
- 保存備用碼到安全位置
- 使用備用碼登錄
- 重新生成備用碼

**4. 聯繫客服**
- 提供帳戶信息
- 驗證身份
- 重置雙重認證

### 會話過期

#### 症狀
- 操作時提示登錄
- 自動退出登錄
- 功能無法使用

#### 解決方案

**1. 重新登錄**
- 輸入用戶名和密碼
- 完成雙重認證（如果啟用）
- 檢查「記住我」選項

**2. 檢查設備時間**
- 確保設備時間準確
- 同步網絡時間

**3. 清除會話數據**
```bash
# 清除應用數據
設置 > 應用管理 > CardStrategy > 存儲 > 清除數據
```

## 應用性能問題

### 應用卡頓

#### 症狀
- 界面響應遲緩
- 操作延遲
- 動畫不流暢

#### 解決方案

**1. 檢查設備性能**
```bash
# 查看 CPU 和內存使用情況
設置 > 關於手機 > 狀態信息 > 內存使用情況
```

**2. 關閉後台應用**
- 關閉不必要的後台應用
- 清理內存
- 重啟設備

**3. 更新應用**
- 檢查應用商店更新
- 安裝最新版本
- 重啟應用

**4. 降低圖像質量**
- 設置 > 應用設置 > 圖像質量 > 標準
- 關閉高質量圖片預覽

### 內存不足

#### 症狀
- 應用崩潰
- 圖片無法加載
- 功能異常

#### 解決方案

**1. 清理設備存儲**
```bash
# 清理緩存文件
設置 > 存儲 > 清理緩存

# 刪除不必要文件
文件管理器 > 刪除舊文件
```

**2. 限制應用數據**
- 設置 > 應用管理 > CardStrategy > 數據使用
- 限制後台數據使用
- 關閉自動同步

**3. 重啟設備**
- 完全關閉設備
- 等待 30 秒
- 重新啟動

## 數據同步問題

### 數據不同步

#### 症狀
- 多設備數據不一致
- 新添加的卡牌未同步
- 修改未保存

#### 解決方案

**1. 手動同步**
```bash
# 下拉刷新
在卡牌列表頁面下拉刷新

# 強制同步
設置 > 數據同步 > 立即同步
```

**2. 檢查網絡連接**
- 確保穩定的網絡連接
- 切換 WiFi/移動數據
- 檢查防火牆設置

**3. 清除同步緩存**
```bash
# 清除同步數據
設置 > 數據同步 > 清除同步緩存
```

**4. 重新登錄**
- 退出登錄
- 重新登錄
- 等待數據同步完成

### 數據丟失

#### 症狀
- 卡牌記錄消失
- 投資數據丟失
- 設置重置

#### 解決方案

**1. 檢查雲端備份**
```bash
# 恢復雲端數據
設置 > 數據備份 > 從雲端恢復
```

**2. 檢查本地備份**
```bash
# 恢復本地備份
設置 > 數據備份 > 從本地恢復
```

**3. 聯繫客服**
- 提供帳戶信息
- 說明數據丟失情況
- 請求數據恢復

**4. 預防措施**
- 定期備份數據
- 啟用自動同步
- 檢查備份狀態

## 網絡連接問題

### 連接超時

#### 症狀
- 請求超時錯誤
- 加載失敗
- 無法訪問服務

#### 解決方案

**1. 檢查網絡連接**
```bash
# 測試網絡連接
ping 8.8.8.8

# 測試 DNS
nslookup cardstrategy.com
```

**2. 切換網絡**
- 切換 WiFi 網絡
- 使用移動數據
- 嘗試熱點連接

**3. 清除網絡緩存**
```bash
# 清除 DNS 緩存
設置 > 網絡和互聯網 > 重置網絡設置
```

**4. 檢查防火牆**
- 檢查設備防火牆設置
- 允許應用網絡訪問
- 檢查企業網絡限制

### 慢速連接

#### 症狀
- 加載速度慢
- 圖片無法顯示
- 功能響應遲緩

#### 解決方案

**1. 優化網絡設置**
```bash
# 設置 DNS
設置 > 網絡和互聯網 > WiFi > 高級 > 靜態 IP
DNS1: 8.8.8.8
DNS2: 8.8.4.4
```

**2. 降低數據使用**
- 設置 > 應用設置 > 數據使用 > 節省流量
- 關閉自動圖片加載
- 使用低質量圖片

**3. 使用代理**
- 配置代理服務器
- 使用 VPN 服務
- 檢查代理設置

## 功能異常問題

### 卡牌掃描失敗

#### 症狀
- 無法識別卡牌
- 識別結果錯誤
- 掃描功能無響應

#### 解決方案

**1. 檢查相機權限**
```bash
# 授予相機權限
設置 > 應用管理 > CardStrategy > 權限 > 相機 > 允許
```

**2. 改善拍攝條件**
- 確保光線充足
- 保持卡牌平整
- 避免反光和陰影
- 對準卡牌邊框

**3. 手動輸入**
- 使用手動輸入功能
- 選擇卡牌系列
- 輸入卡牌信息

**4. 更新應用**
- 檢查應用更新
- 安裝最新版本
- 重啟應用

### AI 功能異常

#### 症狀
- AI 預測失敗
- 推薦功能異常
- 分析結果錯誤

#### 解決方案

**1. 檢查數據完整性**
- 確保卡牌信息完整
- 檢查市場數據
- 驗證歷史記錄

**2. 重新訓練模型**
```bash
# 重置 AI 設置
設置 > AI 設置 > 重置模型 > 確認
```

**3. 檢查服務狀態**
- 查看服務狀態頁面
- 等待服務恢復
- 聯繫技術支持

**4. 使用備用功能**
- 使用手動分析
- 參考市場數據
- 諮詢專家建議

### 通知問題

#### 症狀
- 無法接收通知
- 通知延遲
- 重複通知

#### 解決方案

**1. 檢查通知權限**
```bash
# 授予通知權限
設置 > 應用管理 > CardStrategy > 權限 > 通知 > 允許
```

**2. 檢查通知設置**
```bash
# 配置通知設置
設置 > 通知設置 > 啟用通知類型
```

**3. 檢查電池優化**
```bash
# 關閉電池優化
設置 > 電池 > 電池優化 > CardStrategy > 不優化
```

**4. 重置通知設置**
- 清除通知歷史
- 重新配置通知
- 測試通知功能

## 系統錯誤

### 應用崩潰

#### 症狀
- 應用突然關閉
- 顯示錯誤信息
- 無法重新啟動

#### 解決方案

**1. 收集錯誤信息**
```bash
# 查看錯誤日誌
設置 > 關於手機 > 狀態信息 > 錯誤報告
```

**2. 清除應用數據**
```bash
# 清除所有數據
設置 > 應用管理 > CardStrategy > 存儲 > 清除數據
```

**3. 重新安裝應用**
- 卸載應用
- 重新下載
- 重新安裝

**4. 聯繫技術支持**
- 提供錯誤信息
- 描述操作步驟
- 等待技術支持

### 數據庫錯誤

#### 症狀
- 數據無法保存
- 查詢失敗
- 數據損壞

#### 解決方案

**1. 檢查存儲空間**
- 確保足夠的存儲空間
- 清理不必要的文件

**2. 修復數據庫**
```bash
# 修復本地數據庫
設置 > 數據管理 > 修復數據庫
```

**3. 恢復備份**
- 從雲端恢復數據
- 從本地備份恢復
- 重新同步數據

**4. 重置應用**
- 清除所有數據
- 重新設置應用
- 重新導入數據

## 開發環境問題

### 環境配置問題

#### 症狀
- 開發環境無法啟動
- 依賴安裝失敗
- 編譯錯誤

#### 解決方案

**1. 檢查 Node.js 版本**
```bash
# 檢查 Node.js 版本
node --version
npm --version

# 更新 Node.js
nvm install 18
nvm use 18
```

**2. 清理依賴**
```bash
# 清理 node_modules
rm -rf node_modules
rm package-lock.json

# 重新安裝依賴
npm install
```

**3. 檢查環境變量**
```bash
# 檢查 .env 文件
cat .env

# 設置環境變量
export NODE_ENV=development
export PORT=3000
```

**4. 檢查數據庫連接**
```bash
# 檢查 PostgreSQL 狀態
sudo systemctl status postgresql

# 檢查數據庫連接
psql -h localhost -U cardstrategy_user -d cardstrategy_db
```

### 測試問題

#### 症狀
- 測試失敗
- 測試覆蓋率低
- 測試環境問題

#### 解決方案

**1. 運行單元測試**
```bash
# 運行所有測試
npm test

# 運行特定測試
npm test -- --grep "auth"
```

**2. 檢查測試環境**
```bash
# 設置測試環境
export NODE_ENV=test
export TEST_DB_URL=postgresql://test_user:test_pass@localhost/test_db
```

**3. 修復測試數據**
```bash
# 重置測試數據庫
npm run test:reset

# 運行測試遷移
npm run test:migrate
```

**4. 檢查測試配置**
```bash
# 檢查 Jest 配置
cat jest.config.js

# 檢查測試設置
cat tests/setup.js
```

## 部署問題

### Docker 部署問題

#### 症狀
- 容器無法啟動
- 服務無法訪問
- 數據持久化問題

#### 解決方案

**1. 檢查 Docker 狀態**
```bash
# 檢查 Docker 服務
sudo systemctl status docker

# 檢查容器狀態
docker ps -a
```

**2. 查看容器日誌**
```bash
# 查看應用日誌
docker logs cardstrategy-backend

# 查看數據庫日誌
docker logs cardstrategy-postgres
```

**3. 重新構建鏡像**
```bash
# 重新構建鏡像
docker-compose build --no-cache

# 重新啟動服務
docker-compose up -d
```

**4. 檢查網絡配置**
```bash
# 檢查網絡
docker network ls

# 檢查端口映射
docker port cardstrategy-backend
```

### 生產環境問題

#### 症狀
- 服務不可用
- 性能問題
- 安全問題

#### 解決方案

**1. 檢查服務狀態**
```bash
# 檢查服務狀態
sudo systemctl status cardstrategy

# 檢查進程
ps aux | grep node
```

**2. 檢查日誌**
```bash
# 查看應用日誌
tail -f /var/log/cardstrategy/app.log

# 查看錯誤日誌
tail -f /var/log/cardstrategy/error.log
```

**3. 檢查資源使用**
```bash
# 檢查 CPU 和內存
htop

# 檢查磁盤使用
df -h

# 檢查網絡連接
netstat -tulpn
```

**4. 重啟服務**
```bash
# 重啟應用服務
sudo systemctl restart cardstrategy

# 重啟數據庫
sudo systemctl restart postgresql
```

### SSL 證書問題

#### 症狀
- HTTPS 無法訪問
- 證書過期
- 證書錯誤

#### 解決方案

**1. 檢查證書狀態**
```bash
# 檢查證書有效期
openssl x509 -in /etc/letsencrypt/live/cardstrategy.com/fullchain.pem -text -noout

# 檢查證書路徑
ls -la /etc/letsencrypt/live/cardstrategy.com/
```

**2. 更新證書**
```bash
# 更新 Let's Encrypt 證書
sudo certbot renew

# 重啟 Nginx
sudo systemctl restart nginx
```

**3. 檢查 Nginx 配置**
```bash
# 檢查配置語法
sudo nginx -t

# 重新加載配置
sudo nginx -s reload
```

**4. 檢查防火牆**
```bash
# 檢查防火牆規則
sudo ufw status

# 允許 HTTPS 端口
sudo ufw allow 443
```

## 聯繫支持

### 技術支持

#### 在線支持
- **工作時間**: 週一至週五 9:00-18:00
- **支持渠道**: 在線聊天、郵件、電話
- **響應時間**: 2-4 小時內回覆

#### 緊急支持
- **24/7 熱線**: +1-800-CARD-HELP
- **緊急郵箱**: emergency@cardstrategy.com
- **響應時間**: 30 分鐘內回覆

### 提交問題報告

#### 問題報告模板
```
標題: [問題類型] 簡短描述

環境信息:
- 設備型號: 
- 操作系統: 
- 應用版本: 
- 網絡環境: 

問題描述:
- 具體症狀:
- 重現步驟:
- 預期行為:
- 實際行為:

錯誤信息:
- 錯誤代碼:
- 錯誤信息:
- 錯誤截圖:

附加信息:
- 問題發生時間:
- 相關操作:
- 其他說明:
```

#### 提交渠道
- **GitHub Issues**: https://github.com/cardstrategy/issues
- **郵件支持**: support@cardstrategy.com
- **在線表單**: https://cardstrategy.com/support

### 社區支持

#### 用戶論壇
- **官方論壇**: https://community.cardstrategy.com
- **Discord 社區**: https://discord.gg/cardstrategy
- **Reddit**: r/CardStrategy

#### 知識庫
- **FAQ**: https://cardstrategy.com/faq
- **視頻教程**: https://cardstrategy.com/tutorials
- **開發文檔**: https://docs.cardstrategy.com

---

**注意**: 在聯繫支持前，請先嘗試本指南中的解決方案。提供詳細的問題描述和錯誤信息將有助於更快地解決問題。
