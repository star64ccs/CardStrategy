<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardStrategy - Segment é›†æˆæ¨¡æ¿</title>
    
    <!-- Segment Analytics ä»£ç¢¼ç‰‡æ®µ -->
    <script>
      !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="mdGZ0xW3RFNPGXgMP6tbxIB25HPR7wLC";;analytics.SNIPPET_VERSION="5.2.0";
      analytics.load("mdGZ0xW3RFNPGXgMP6tbxIB25HPR7wLC");
      analytics.page();
      }}();
    </script>
</head>
<body>
    <h1>CardStrategy - Segment é›†æˆæ¸¬è©¦</h1>
    
    <!-- æ¸¬è©¦æŒ‰éˆ• -->
    <div id="test-buttons">
        <h2>äº‹ä»¶è¿½è¹¤æ¸¬è©¦</h2>
        
        <button onclick="testUserIdentification()">æ¸¬è©¦ç”¨æˆ¶è­˜åˆ¥</button>
        <button onclick="testCardViewed()">æ¸¬è©¦å¡ç‰‡æŸ¥çœ‹</button>
        <button onclick="testCardPurchased()">æ¸¬è©¦å¡ç‰‡è³¼è²·</button>
        <button onclick="testSearch()">æ¸¬è©¦æœç´¢</button>
        <button onclick="testWishlist()">æ¸¬è©¦é¡˜æœ›æ¸…å–®</button>
        <button onclick="testPageView()">æ¸¬è©¦é é¢ç€è¦½</button>
        <button onclick="testSignUp()">æ¸¬è©¦ç”¨æˆ¶è¨»å†Š</button>
    </div>

    <div id="results">
        <h3>æ¸¬è©¦çµæœ</h3>
        <div id="log"></div>
    </div>

    <script>
        // æ¸¬è©¦å‡½æ•¸
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<p>[${timestamp}] ${message}</p>`;
        }

        function testUserIdentification() {
            analytics.identify('user123', {
                name: 'æ¸¬è©¦ç”¨æˆ¶',
                email: 'test@cardstrategy.com',
                plan: 'free'
            });
            log('âœ… ç”¨æˆ¶è­˜åˆ¥äº‹ä»¶å·²ç™¼é€');
        }

        function testCardViewed() {
            analytics.track('Card Viewed', {
                card_id: 'card_123',
                card_name: 'Black Lotus',
                card_category: 'Magic',
                card_rarity: 'Rare',
                card_price: 299.99,
                view_source: 'search',
                user_id: 'user123'
            });
            log('âœ… å¡ç‰‡æŸ¥çœ‹äº‹ä»¶å·²ç™¼é€');
        }

        function testCardPurchased() {
            analytics.track('Card Purchased', {
                card_id: 'card_123',
                card_name: 'Black Lotus',
                card_price: 299.99,
                payment_method: 'credit_card',
                purchase_source: 'wishlist',
                user_id: 'user123'
            });
            log('âœ… å¡ç‰‡è³¼è²·äº‹ä»¶å·²ç™¼é€');
        }

        function testSearch() {
            analytics.track('Search Performed', {
                search_query: 'Black Lotus',
                search_category: 'Magic',
                search_results_count: 5,
                search_filters: 'rarity:rare',
                search_source: 'header',
                user_id: 'user123'
            });
            log('âœ… æœç´¢äº‹ä»¶å·²ç™¼é€');
        }

        function testWishlist() {
            analytics.track('Wishlist Added', {
                card_id: 'card_123',
                card_name: 'Black Lotus',
                card_price: 299.99,
                wishlist_source: 'card_page',
                wishlist_position: 1,
                user_id: 'user123'
            });
            log('âœ… é¡˜æœ›æ¸…å–®äº‹ä»¶å·²ç™¼é€');
        }

        function testPageView() {
            analytics.track('Page View', {
                page_name: 'Card Details',
                page_url: '/cards/black-lotus',
                page_category: 'product',
                user_id: 'user123'
            });
            log('âœ… é é¢ç€è¦½äº‹ä»¶å·²ç™¼é€');
        }

        function testSignUp() {
            analytics.track('Sign Up', {
                signup_method: 'email',
                signup_source: 'landing_page',
                user_id: 'user123'
            });
            log('âœ… ç”¨æˆ¶è¨»å†Šäº‹ä»¶å·²ç™¼é€');
        }

        // é é¢åŠ è¼‰å®Œæˆå¾Œè¨˜éŒ„
        window.addEventListener('load', function() {
            log('ğŸš€ Segment é›†æˆæ¸¬è©¦é é¢å·²åŠ è¼‰');
            log('ğŸ“Š è«‹é»æ“Šä¸Šæ–¹æŒ‰éˆ•æ¸¬è©¦å„ç¨®äº‹ä»¶è¿½è¹¤');
        });
    </script>

    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        #test-buttons {
            margin: 20px 0;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        #log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        #log p {
            margin: 5px 0;
            font-family: monospace;
        }
    </style>
</body>
</html>
